name: InspectCode

on:
  workflow_run:
    workflows: [CleanUpCode]
    types:
      - completed

jobs:
    r-sharp-inspection:
        name:  R# Inspect Code
        runs-on: ubuntu-latest
        needs: r-sharp-cleanup

        steps:
          - name: Checkout
            uses: actions/checkout@v3

          - name: Setup .NET
            uses: actions/setup-dotnet@v3
            with:
              dotnet-version: 6.0.x

          - name: Restore Dependencies
            run: dotnet restore Blef.sln

          - name: Inspect code
            uses: muno92/resharper_inspectcode@1.6.7
            with:
              solutionPath: ./Blef.sln
              failOnIssue: 1
              minimumSeverity: notice
              solutionWideAnalysis: true
